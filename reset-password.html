<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Passworld</title>
     <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-r from-blue-300 to-blue-500 flex items-center justify-center min-h-screen">
  
   <div class="bg-white shadow-2xl rounded-3xl w-full max-w-md p-10 relative flex flex-col items-center">

    <!-- Logo / รูปภาพ (ใส่ถ้ามี) -->
    <div class="flex justify-center -mt-24 mb-6">
      <img src="/img/water.png" alt="Water Tracker Logo" class="w-32 h-32 object-contain">
    </div>

    <!-- Header -->
    <h2 class="text-3xl font-extrabold text-blue-600 mb-4 text-center">Reset Your Password</h2>
    <p class="text-gray-600 text-center mb-8">
      กรุณากรอกรหัสผ่านใหม่เพื่อรีเซ็ท
    </p>

    <!-- Form -->
    <form id="resetForm" class="w-full space-y-6">
      <!-- New Password -->
      <div>
        <label for="new-password" class="block text-gray-700 font-semibold mb-2">New Password</label>
        <input 
          type="password" 
          id="new-password" 
          name="new-password" 
          placeholder="กรอกรหัสผ่านใหม่"
          required
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
        />
      </div>

      <!-- Confirm Password -->
      <div>
        <label for="confirm-password" class="block text-gray-700 font-semibold mb-2">Confirm Password</label>
        <input 
          type="password" 
          id="confirm-password" 
          name="confirm-password" 
          placeholder="กรอกรหัสผ่านยืนยัน"
          required
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
        />
      </div>

      <!-- Reset Button -->
      <button 
        type="submit"
        class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors"
      >
        Reset Password
      </button>
    </form>

    <!-- Back to Login -->
    <p class="text-center text-gray-600 mt-6">
      คุณจำรหัสผ่านได้แล้ว? 
      <a href="loginwater.html" class="text-blue-600 font-semibold hover:underline">ล็อกอิน</a>
    </p>

  </div>


<script>
const users = JSON.parse(localStorage.getItem("users")) || [];
const resetUser = JSON.parse(localStorage.getItem("resetUser"));

document.getElementById("resetForm").addEventListener("submit", e=>{
  e.preventDefault();
  const newPass = document.getElementById("new-password").value;
  const confirmPass = document.getElementById("confirm-password").value;
  if(newPass !== confirmPass){
    alert("Password ไม่ตรงกัน");
    return;
  }
  const index = users.findIndex(u => u.username === resetUser.username);
  if(index !== -1){
    users[index].password = newPass;
    localStorage.setItem("users", JSON.stringify(users));
    alert("Reset Password สำเร็จ");
    window.location.href = "loginwater.html";
  }
});
</script>

</body>
</html>